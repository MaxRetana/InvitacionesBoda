<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitaci√≥n de Boda</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@300;400;600&family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="boda.css">
</head>
<body>
    <!-- Control de m√∫sica de fondo -->
    <div class="music-control" id="musicControl">
        <button id="musicButton" class="music-button">
            <span class="music-icon">üéµ</span>
        </button>
    </div>
    
    <!-- Audio de fondo -->
    <audio id="backgroundMusic" loop>
        <source src="Cancion.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>
    <!-- Animaci√≥n del sobre -->
    <div id="envelope-container" class="envelope-container">
        <!-- Sobre cerrado -->
        <div class="envelope-wrapper">
            <div class="envelope-back"></div>
            <div class="envelope-front"></div>
            <div class="envelope-flap"></div>
            <div class="envelope-seal">
                <div class="heart">B & M</div>
            </div>
        </div>
        
        <!-- Texto de instrucci√≥n -->
        <div class="scroll-instruction">
            <p>Desliza hacia abajo para abrir</p>
            <div class="scroll-arrow">‚Üì</div>
        </div>
    </div>

    <div class="invitation-container" id="invitation-content">
        <div class="invitation-content">
            
            <!-- Secci√≥n de portada -->
        <div class="section cover-section">
            <div class="couple-names-title">
                Nuestra Boda<br>
            </div>
            <div class="couple-names">
                Dora Berenice<br>
                &<br>
                Jos√© Maximiliano<br>
            </div>
            <div class="couple-names-parents">
                <span class="title-parents">Con la bendici√≥n de Dios y de nuestros padres</span>
                
                <br>
                <br>
                <span class="parents-label">Padres de la Novia:</span><br>
                <span class="parents-names">Jos√© Porfirio Carmona Santiago <br> Ma. Mercedes Castellanos I√±iguez</span>
                <br>
                <br>
                <span class="parents-label">Padres del Novio:</span><br>
                <span class="parents-names">Jos√© Natividad Retana Rodr√≠guez <br> Ana Lilia L√≥pez Armenta</span>
            </div>
            
            <div class="wedding-date">
                <div class="subtext-date">
                    El d√≠a en que dos corazones se unen para siempre
                </div>
                <div class="date">31 | 01 | 2026</div>
                
            </div>
        </div>
        <!-- Cuenta regresiva -->
        <div class="section countdown-section">
            <div class="section-title">CUENTA REGRESIVA</div>
            <div class="countdown-timer">
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">D√≠as</span>
                </div>
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Horas</span>
                </div>
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Min</span>
                </div>
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Seg</span>
                </div>
            </div>
        </div>



        <!-- Secci√≥n de foto -->
        <div class="section photo-section">
            <div class="couple-photo-container">
                <img src="IMG1.jpg" 
                        alt="Foto rom√°ntica de la pareja" 
                        class="couple-photo"
                        style="object-position: center 30%;">
            </div>
        </div>

        <!-- Secci√≥n de cita -->
        <div class="section quote-section">
            <div class="quote-text">
                "Ya no son dos, sino uno solo.<br>
                Por tanto, lo que Dios ha unido,<br>
                que no lo separe el hombre."
            </div>
            <div class="quote-author">
                - Mateo 19:6
            </div>
        </div>

        <!-- Secci√≥n de padrinos -->
        <div class="section">
            
            <div class="padrinos-container">
                <div class="section-title">PADRINOS</div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="velacion.png" alt="velacion icon" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Velaci√≥n</div>
                        <div class="padrino-nombres">Norma Aguilar Armenta <br> Jes√∫s Solis Anguiano</div>
                    </div>
                </div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="ANILLOS.png" alt="Anillos" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Anillos</div>
                        <div class="padrino-nombres">Heriberto L√≥pez Armenta <br> Ana Luisa Rol√≥n</div>
                    </div>
                </div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="arras.png" alt="arras icon" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Arras</div>
                        <div class="padrino-nombres">Salvador Castellanos I√±iguez <br> Ofelia Curiel Lares</div>
                    </div>
                </div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="lazo.png" alt="lazo" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Lazo</div>
                        <div class="padrino-nombres">Juan Moctezuma Ram√≠rez <br> Ma. del Refugio Castellanos I√±iguez</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="couple-photo-container">
            <img src="IMG4.jpg" 
                    alt="Foto rom√°ntica de la pareja" 
                    class="couple-photo">
        </div>

        <!-- Secci√≥n de ceremonia -->
        <div class="section">
            <div class="section-title">CEREMONIA RELIGIOSA</div>
            <div class="info-text">
                <strong>Parroquia Inmaculado Coraz√≥n de Mar√≠a</strong><br>
                C. Guillermo Prieto 561, Guadalajarita, 28030 Colima, Col.
            </div>
            <a href="https://maps.google.com/?q=Parroquia+Inmaculado+Coraz√≥n+de+Mar√≠a,+C.+Guillermo+Prieto+561,+Guadalajarita,+28030+Colima,+Col." target="_blank" class="location-button" style="display: inline-block; text-decoration: none;">Ver ubicaci√≥n</a>
            
        </div>

        <div class="couple-photo-container">
            <img src="PARROQUIA.jpg" 
                    alt="Parroquia Inmaculado Coraz√≥n de Mar√≠a" 
                    class="couple-photo">
        </div>

        <!-- Secci√≥n de recepci√≥n -->
        <div class="section">
            <div class="section-title">SAL√ìN DE EVENTOS</div>
            <div class="info-text">
                <strong>Rojo y Miel</strong><br>
                Corregidora 183, San Juan, 28450 Comala, Col.
            </div>
            <a href="https://maps.google.com/?q=Rojo+y+Miel,+Corregidora+183,+San+Juan,+28450+Comala,+Col." target="_blank" class="location-button" style="display: inline-block; text-decoration: none;">Ver ubicaci√≥n</a>
        </div>
        <div class="couple-photo-container">
            <img src="SALON.jpg" 
                    alt="Rojo y Miel Sal√≥n de Eventos" 
                    class="couple-photo">
        </div>

        <!-- C√≥digo de vestimenta -->
        <div class="section">
            <div class="section-title">C√ìDIGO DE VESTIMENTA</div>
            <div class="dress-code">Formal</div>
            <div class="dress-code-icons">
                <div class="icon-placeholder"><img src="Traje.png" alt="Traje" style="width:50px; height: 50px; opacity: 0.7;"></div>
                <div class="icon-placeholder"><img src="Vestido.png" alt="Vestido" style="width:50px; height: 50px; opacity: 0.7;"></div>
            </div>
            
            <!-- Texto actualizado -->
            <div class="info-text">

                <strong>Tonalidad principal de la boda:</strong> <br> Verde Olivo
                <span style="display: inline-block; width: 20px; height: 20px; background-color: #708238; border-radius: 50%; margin-left: 8px; border: 2px solid white; vertical-align: middle;"></span>
                <br><br>

                Para mantener la armon√≠a visual del evento:<br><br>

                <strong><span class="dress-code">Caballeros:</span> </strong><br>
                Les pedimos evitar accesorios (camisa, corbata o mo√±o) en color verde olivo.<br><br>

                <strong><span class="dress-code">Damas:</span></strong><br>
                Agradeceremos evitar vestidos en color blanco, ivory, derivados y verde olivo.
            </div>
        </div>

        <div class="couple-photo-container">
            <img src="IMG5.jpg" 
                    alt="Foto rom√°ntica de la pareja" 
                    class="couple-photo"
                    style="object-position: center 30%;">
        </div>


        <!-- Cronograma -->
        <div class="section">
            <div class="section-title-schedule">TE COMPARTIMOS LOS DETALLES DE LA CELEBRACI√ìN</div>
            <div class="timeline-container">
                <div class="timeline-item" data-index="0">
                    <div class="timeline-dot">
                        <span class="timeline-number">‚ô°</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">06:00 PM</div>
                        <div class="timeline-event">Ceremonia Religiosa</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="1">
                    <div class="timeline-dot">
                        <span class="timeline-number">‚ô°</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">7:30 PM</div>
                        <div class="timeline-event">Recepci√≥n en el sal√≥n de eventos</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="2">
                    <div class="timeline-dot">
                        <span class="timeline-number">‚ô°</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">8:00 PM</div>
                        <div class="timeline-event">Entrada de novios</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="3">
                    <div class="timeline-dot">
                        <span class="timeline-number">‚ô°</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">8:30 PM</div>
                        <div class="timeline-event">Brindis y vals</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="4">
                    <div class="timeline-dot">
                        <span class="timeline-number">‚ô°</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">10:00 PM</div>
                        <div class="timeline-event">Cena</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="5">
                    <div class="timeline-dot">
                        <span class="timeline-number">‚ô°</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">11:00 PM</div>
                        <div class="timeline-event">Baile</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Otra foto -->
        <div class="couple-photo-container">
            <img src="IMG6.jpg" 
                    alt="Foto rom√°ntica de la pareja" 
                    class="couple-photo"
                    style="object-position: center 30%;">
        </div>

        <!-- Informaci√≥n adicional -->
        <div class="section">
            <div class="section-title">SUGERENCIAS DE REGALOS</div>
            <div class="info-text">
                <span class="gifts-text">
                    Lo m√°s importante para nosotros es compartir este d√≠a tan especial con ustedes.
                    Si desean obsequiarnos algo, pueden participar en nuestra <em>lluvia de sobres</em>
                </span>
                <br>
                <span>
                    <img src="Sobre.png" alt="sobre" style="width:55px; height: 55px; opacity: 0.7; margin-top: 10px; margin-bottom: 10px;">
                </span> 
                <br> 
                <span class="gifts-text">
                    O, si lo prefieren pueden visitar nuestra mesa de regalos en Amazon, donde seleccionamos algunos detalles que nos ayudar√°n a comenzar esta nueva etapa juntos.
                </span>
                <br> 
                <a href="https://www.amazon.com.mx/wedding/registry/3TH286IOUNYQ3" target="_blank" class="amazon-button" style="display: inline-block; text-decoration: none; background: rgba(255,255,255,0.1); padding: 15px 20px; border-radius: 10px; margin: 15px 0; transition: all 0.3s ease; border: 2px solid rgba(255,255,255,0.3);">
                    <img src="Amazon.png" alt="Mesa de regalos Amazon" style="height: 55px; opacity: 0.9;">
                </a>
                <br>
                <span class="gifts-text">
                    Adem√°s, tendremos una mesa de regalos en la fiesta para quienes deseen llevar algo f√≠sico ese d√≠a.
                </span>
                
            </div>
        </div>

        <!-- RSVP y mensaje final -->
        <div class="section rsvp-section">
            <div class="section-title">CONFIRMAR ASISTENCIA</div>
            <div class="info-text" style="margin-bottom: 20px;">
                Por favor confirma tu asistencia antes del 30 de diciembre
            </div>
            
            <!-- Formulario de confirmaci√≥n -->
            <form id="rsvpForm" action="https://formspree.io/f/movkyprl" method="POST" style="text-align: left; max-width: 300px; margin: 0 auto;">
                <div style="margin-bottom: 15px;">
                    <label for="nombre" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">Nombre completo:</label>
                    <input type="text" id="nombre" name="nombre" required style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em;">
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="asistencia" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">¬øAsistir√°s?</label>
                    <select id="asistencia" name="asistencia" required style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em;">
                        <option value="">Selecciona una opci√≥n</option>
                        <option value="si">S√≠, asistir√©</option>
                        <option value="no">No podr√© asistir</option>
                    </select>
                </div>
                
                <div id="cantidadPersonas" style="margin-bottom: 15px; display: none;">
                    <label for="personas" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">¬øCu√°ntos acompa√±antes tendr√°s?</label>
                    <select id="personas" name="personas" style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em;">
                        <option value="1">1 persona</option>
                        <option value="2">2 personas</option>
                        <option value="3">3 personas</option>
                        <option value="4">4 personas</option>
                        <option value="5">5 personas</option>
                        <option value="6">6 personas</option>
                        <option value="7">7 personas</option>
                        <option value="8">8 personas</option>
                        <option value="9">9 personas</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="comentarios" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">Comentarios (opcional):</label>
                    <textarea id="comentarios" name="comentarios" rows="3" style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em; resize: vertical;" placeholder="Alergias alimentarias, necesidades especiales, etc."></textarea>
                </div>
                
                <button type="submit" style="width: 100%; background: white; color: #a8b8a0; padding: 12px; border: none; border-radius: 25px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    Confirmar Asistencia
                </button>
            </form>
            
            <!-- Mensaje de confirmaci√≥n -->
            <div id="mensajeConfirmacion" style="display: none; background: rgba(255,255,255,0.9); color: #5a6b52; padding: 20px; border-radius: 10px; margin-top: 20px;">
                <strong>¬°Gracias por confirmar!</strong><br>
                Hemos recibido tu respuesta. Te esperamos con mucho cari√±o.
            </div>
            
            <div class="section-title" style="margin-top: 30px;">ESPERAMOS CONTAR CON SU PRESENCIA</div>
            <div class="final-message">
                ¬°Muchas Gracias!
            </div>
        </div>
        <div class="couple-photo-container">
            <img src="IMG2.jpg" 
                    alt="Parroquia Inmaculado Coraz√≥n de Mar√≠a" 
                    class="couple-photo">
        </div>
        <div class="couple-photo-container">
            <img src="IMG3.jpg" 
                    alt="Parroquia Inmaculado Coraz√≥n de Mar√≠a" 
                    class="couple-photo">
        </div>
        <div class="couple-photo-container">
            <img src="IMG7.jpg" 
                    alt="Parroquia Inmaculado Coraz√≥n de Mar√≠a" 
                    class="couple-photo">
        </div>
        <div class="couple-photo-container">
            <img src="IMG8.jpg" 
                    alt="Parroquia Inmaculado Coraz√≥n de Mar√≠a" 
                    class="couple-photo">
        </div>
        <!-- CREDITOS -->
        <div class="section rsvp-section" style="font-size: 0.6em; color: white; text-align: center; padding-bottom: 100px;">
            Dise√±ado y desarrollado por: <br> Maximiliano Retana & Berenice Carmona
        </div>
        </div> <!-- Cierre del invitation-content -->
    </div>

    <script>
        // Animaci√≥n del sobre
        let envelopeOpened = false;
        let scrollTimeout;

        function initEnvelopeAnimation() {
            const envelopeContainer = document.getElementById('envelope-container');
            const envelopeWrapper = document.querySelector('.envelope-wrapper');
            const invitationContent = document.getElementById('invitation-content');

            // Funci√≥n para abrir el sobre
            function openEnvelope() {
                if (envelopeOpened) return;
                
                envelopeOpened = true;
                envelopeWrapper.classList.add('opening');
                
                // Despu√©s de la animaci√≥n de apertura, ocultar el sobre y mostrar la invitaci√≥n
                setTimeout(() => {
                    envelopeContainer.classList.add('opened');
                    invitationContent.classList.add('visible');
                    
                    // Deshabilitar el scroll del body para evitar conflictos
                    document.body.classList.add('envelope-opened');
                    
                    // Asegurar que el scroll est√© en la parte superior del contenedor interno
                    const innerContent = document.querySelector('.invitation-content');
                    if (innerContent) {
                        innerContent.scrollTop = 0;
                    }
                    
                    // Configurar los listeners del timeline SOLO despu√©s de abrir el sobre
                    setupTimelineListeners();
                }, 600);
            }

            // Detectar intentos de scroll o gestos para abrir el sobre
            function handleWheelOrTouch(event) {
                if (!envelopeOpened) {
                    // Detectar movimiento hacia abajo (rueda del mouse o deslizar)
                    if (event.deltaY > 0 || (event.touches && event.touches.length > 0)) {
                        openEnvelope();
                    }
                }
            }

            // Detectar rueda del mouse
            window.addEventListener('wheel', handleWheelOrTouch, { passive: true });
            
            // Detectar eventos t√°ctiles para m√≥viles
            let touchStartY = 0;
            
            envelopeContainer.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });
            
            envelopeContainer.addEventListener('touchmove', (e) => {
                if (!envelopeOpened) {
                    const touchEndY = e.touches[0].clientY;
                    const deltaY = touchStartY - touchEndY;
                    
                    // Si desliza hacia arriba (equivalente a scroll hacia abajo)
                    if (deltaY > 50) {
                        openEnvelope();
                    }
                }
            }, { passive: true });

            // Tambi√©n permitir hacer clic para abrir
            envelopeContainer.addEventListener('click', openEnvelope);
        }

        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', initEnvelopeAnimation);

        // Control de m√∫sica de fondo
        document.addEventListener('DOMContentLoaded', function() {
            const musicButton = document.getElementById('musicButton');
            const backgroundMusic = document.getElementById('backgroundMusic');
            const musicIcon = document.querySelector('.music-icon');
            let isPlaying = false;

            // Configurar volumen inicial
            backgroundMusic.volume = 0.3; // 30% del volumen m√°ximo

            // Configurar estado inicial del bot√≥n como activo
            musicIcon.textContent = 'üé∂';
            musicButton.classList.add('playing');

            // Funci√≥n para reproducir/pausar m√∫sica
            function toggleMusic() {
                if (isPlaying) {
                    backgroundMusic.pause();
                    musicIcon.textContent = 'üéµ';
                    musicButton.classList.remove('playing');
                    isPlaying = false;
                } else {
                    backgroundMusic.play().then(() => {
                        musicIcon.textContent = 'üé∂';
                        musicButton.classList.add('playing');
                        isPlaying = true;
                    }).catch(error => {
                        console.log('Error al reproducir m√∫sica:', error);
                    });
                }
            }

            // Event listener para el bot√≥n de m√∫sica
            musicButton.addEventListener('click', toggleMusic);

            // Intentar reproducir m√∫sica autom√°ticamente cuando se abre el sobre
            function tryAutoplayMusic() {
                if (!isPlaying) {
                    backgroundMusic.play().then(() => {
                        musicIcon.textContent = 'üé∂';
                        musicButton.classList.add('playing');
                        isPlaying = true;
                    }).catch(error => {
                        // Si no se puede reproducir autom√°ticamente, mantener el bot√≥n visible
                        console.log('Autoplay bloqueado, el usuario debe activar la m√∫sica manualmente');
                        // Mantener la apariencia visual de "activado" aunque no est√© reproduciendo
                        musicIcon.textContent = 'üé∂';
                        musicButton.classList.add('playing');
                    });
                }
            }

            // Intentar iniciar m√∫sica autom√°ticamente cuando se abre el sobre
            setTimeout(() => {
                if (envelopeOpened) {
                    tryAutoplayMusic();
                }
            }, 1000);

            // Iniciar m√∫sica autom√°ticamente al cargar la p√°gina
            setTimeout(() => {
                tryAutoplayMusic();
            }, 2000);

            // Intentar reproducir m√∫sica en cualquier interacci√≥n del usuario
            function enableMusicOnInteraction() {
                if (!isPlaying) {
                    backgroundMusic.play().then(() => {
                        isPlaying = true;
                        musicIcon.textContent = 'üé∂';
                        musicButton.classList.add('playing');
                        console.log('M√∫sica iniciada despu√©s de interacci√≥n del usuario');
                    }).catch(error => {
                        console.log('Error al iniciar m√∫sica:', error);
                    });
                }
            }

            // Agregar listeners para diferentes tipos de interacci√≥n
            document.addEventListener('click', enableMusicOnInteraction, { once: true });
            document.addEventListener('scroll', enableMusicOnInteraction, { once: true });
            document.addEventListener('touchstart', enableMusicOnInteraction, { once: true });
            document.addEventListener('keydown', enableMusicOnInteraction, { once: true });
        });

        // Funci√≥n para actualizar el contador
        function updateCountdown() {
            const weddingDate = new Date('2026-01-31T18:00:00');
            const now = new Date();
            const diff = weddingDate - now;
            
            // Si la fecha ya pas√≥, mostrar ceros
            if (diff <= 0) {
                document.querySelectorAll('.countdown-number')[0].textContent = '00';
                document.querySelectorAll('.countdown-number')[1].textContent = '00';
                document.querySelectorAll('.countdown-number')[2].textContent = '00';
                document.querySelectorAll('.countdown-number')[3].textContent = '00';
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            // Formatear con dos d√≠gitos
            document.querySelectorAll('.countdown-number')[0].textContent = days.toString().padStart(2, '0');
            document.querySelectorAll('.countdown-number')[1].textContent = hours.toString().padStart(2, '0');
            document.querySelectorAll('.countdown-number')[2].textContent = minutes.toString().padStart(2, '0');
            document.querySelectorAll('.countdown-number')[3].textContent = seconds.toString().padStart(2, '0');
        }
        
        // Actualizar cada segundo
        setInterval(updateCountdown, 1000);
        updateCountdown();
        
        // Manejar el formulario RSVP
        document.addEventListener('DOMContentLoaded', function() {
            const asistenciaSelect = document.getElementById('asistencia');
            const cantidadPersonasDiv = document.getElementById('cantidadPersonas');
            const rsvpForm = document.getElementById('rsvpForm');
            const mensajeConfirmacion = document.getElementById('mensajeConfirmacion');
            
            // Mostrar/ocultar campo de cantidad de personas
            asistenciaSelect.addEventListener('change', function() {
                if (this.value === 'si') {
                    cantidadPersonasDiv.style.display = 'block';
                    document.getElementById('personas').required = true;
                } else {
                    cantidadPersonasDiv.style.display = 'none';
                    document.getElementById('personas').required = false;
                }
            });
            
            // Manejar env√≠o del formulario
            rsvpForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(rsvpForm);
                
                // Enviar datos a Formspree
                fetch(rsvpForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        // Mostrar mensaje de confirmaci√≥n
                        rsvpForm.style.display = 'none';
                        mensajeConfirmacion.style.display = 'block';
                    } else {
                        throw new Error('Error al enviar el formulario');
                    }
                })
                .catch(error => {
                    alert('Hubo un problema al enviar tu confirmaci√≥n. Por favor intenta nuevamente o contacta directamente a los novios.');
                    console.error('Error:', error);
                });
            });
        });
        
        // Animaci√≥n del timeline al hacer scroll - CORREGIDO para funcionar con el sobre
        function animateTimeline() {
            const timelineContainer = document.querySelector('.timeline-container');
            if (!timelineContainer) return;
            
            const timelineProgress = document.querySelector('.timeline-progress');
            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineDots = document.querySelectorAll('.timeline-dot');
            const invitationContainer = document.getElementById('invitation-content');
            
            // Si el sobre a√∫n no se ha abierto, no animar el timeline
            if (!envelopeOpened || !invitationContainer.classList.contains('visible')) {
                return;
            }
            
            const containerRect = timelineContainer.getBoundingClientRect();
            const containerTop = containerRect.top;
            const containerHeight = containerRect.height;
            const windowHeight = window.innerHeight;
            
            // Mejorar el c√°lculo del progreso - ajustado para el nuevo layout
            let progress = 0;
            
            // Calcular el progreso basado en la posici√≥n del timeline dentro del contenedor de invitaci√≥n
            if (containerTop <= windowHeight * 0.7) {
                const scrollProgress = Math.max(0, (windowHeight * 0.7 - containerTop) / (containerHeight + windowHeight * 0.3));
                progress = Math.min(1, scrollProgress);
            }
            
            // Animar la l√≠nea de progreso de manera m√°s suave
            if (timelineProgress) {
                timelineProgress.style.height = (progress * 100) + '%';
                timelineProgress.style.transition = 'height 0.3s ease-out';
            }
            
            // Animar los elementos del timeline con bidireccionalidad
            timelineItems.forEach((item, index) => {
                // Calcular el punto de activaci√≥n para cada elemento de forma m√°s distribuida
                const itemActivationPoint = (index / (timelineItems.length - 1)) * 0.8;
                const shouldAnimate = progress >= itemActivationPoint;
                
                // Control bidireccional: aparece cuando debe aparecer, desaparece cuando no
                if (shouldAnimate) {
                    // Aparecer con delay escalonado solo si no est√° ya animado
                    if (!item.classList.contains('animate')) {
                        setTimeout(() => {
                            item.classList.add('animate');
                            if (timelineDots[index]) {
                                timelineDots[index].classList.add('animate');
                            }
                        }, index * 100);
                    }
                }
            });
        }
        
        // Optimizar los event listeners con throttle para mejor rendimiento
        let isScrolling = false;
        function throttledAnimateTimeline() {
            if (!isScrolling) {
                requestAnimationFrame(() => {
                    animateTimeline();
                    isScrolling = false;
                });
                isScrolling = true;
            }
        }
        
        // Funci√≥n para configurar los event listeners del timeline
        function setupTimelineListeners() {
            const invitationContainer = document.querySelector('.invitation-content');
            
            // Solo escuchar el scroll del contenedor interno (no el global)
            if (invitationContainer) {
                invitationContainer.addEventListener('scroll', throttledAnimateTimeline);
            }
            
            // Mantener el listener de resize
            window.addEventListener('resize', animateTimeline);
            
            // Ejecutar una vez para inicializar
            setTimeout(animateTimeline, 100);
            setTimeout(animateTimeline, 300);
            setTimeout(animateTimeline, 500);
        }
        
        // La configuraci√≥n del timeline ahora se hace solo despu√©s de abrir el sobre
        // Ya no es necesario configurar listeners prematuramente
    </script>
</body>
</html>