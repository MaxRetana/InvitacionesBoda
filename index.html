<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitación de Boda</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@300;400;600&family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="boda.css">
</head>
<body>
    <!-- Animación del sobre -->
    <div id="envelope-container" class="envelope-container">
        <!-- Sobre cerrado -->
        <div class="envelope-wrapper">
            <div class="envelope-back"></div>
            <div class="envelope-front"></div>
            <div class="envelope-flap"></div>
            <div class="envelope-seal">
                <div class="heart">♥</div>
            </div>
        </div>
        
        <!-- Texto de instrucción -->
        <div class="scroll-instruction">
            <p>Desliza hacia abajo para abrir</p>
            <div class="scroll-arrow">↓</div>
        </div>
    </div>

    <div class="invitation-container" id="invitation-content">
        <!-- Decoraciones de hojas -->
        <div class="leaf-decoration leaf-top-right"></div>
        <div class="leaf-decoration leaf-bottom-left"></div>
        
        <!-- Sección de portada -->
        <div class="section cover-section">
            <div class="couple-names-title">
                Nuestra Boda<br>
            </div>
            <div class="couple-names">
                Dora Berenice<br>
                &<br>
                José Maximiliano<br>
            </div>
            <div class="couple-names-parents">
                <span class="title-parents">Con la bendición de Dios y de nuestros padres</span>
                
                <br>
                <br>
                <span class="parents-label">Padres de la Novia:</span><br>
                <span class="parents-names">José Porfirio Carmona Santiago <br> Ma. Mercedes Castellanos Iñiguez</span>
                <br>
                <br>
                <span class="parents-label">Padres del Novio:</span><br>
                <span class="parents-names">José Natividad Retana Rodríguez <br> Ana Lilia López Armenta</span>
            </div>
            
            <div class="wedding-date">
                <div class="subtext-date">
                    El día en que dos corazones se unen para siempre
                </div>
                <div class="date">31 | 01 | 2026</div>
                
            </div>
        </div>
        <!-- Cuenta regresiva -->
        <div class="section countdown-section">
            <div class="section-title">FALTAN</div>
            <div class="countdown-timer">
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Días</span>
                </div>
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Horas</span>
                </div>
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Min</span>
                </div>
                <div class="countdown-unit">
                    <span class="countdown-number">00</span>
                    <span class="countdown-label">Seg</span>
                </div>
            </div>
        </div>



        <!-- Sección de foto -->
        <div class="section photo-section">
            <div class="couple-photo-container">
                <img src="IMG1.jpg" 
                        alt="Foto romántica de la pareja" 
                        class="couple-photo"
                        style="object-position: center 30%;">
            </div>
        </div>

        <!-- Sección de cita -->
        <div class="section quote-section">
            <div class="quote-text">
                "Ya no son dos, sino uno solo.<br>
                Por tanto, lo que Dios ha unido,<br>
                que no lo separe el hombre."
            </div>
            <div class="quote-author">
                - Mateo 19:6
            </div>
        </div>

        <!-- Sección de padrinos -->
        <div class="section">
            <div class="section-title">PADRINOS</div>
            <div class="padrinos-container">
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="velacion.png" alt="velacion icon" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Velación</div>
                        <div class="padrino-nombres">Norma Aguilar Armenta <br> Jesús Solis Anguiano</div>
                    </div>
                </div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="ANILLOS.png" alt="Anillos" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Anillos</div>
                        <div class="padrino-nombres">Heriberto López Armenta <br> Ana Luisa Rolón</div>
                    </div>
                </div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="arras.png" alt="arras icon" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Arras</div>
                        <div class="padrino-nombres">Salvador Castellanos Iñiguez <br> Ofelia Curiel Lares</div>
                    </div>
                </div>
                <div class="padrino-item">
                    <div class="padrino-icon">
                        <img src="lazo.png" alt="lazo" style="width:50px; height: 50px; opacity: 0.7;">
                    </div>
                    <div class="padrino-content">
                        <div class="padrino-tipo">Lazo</div>
                        <div class="padrino-nombres">Juan Moctezuma Ramírez <br> Ma. del Refugio Castellanos Iñiguez</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="couple-photo-container">
            <img src="IMG4.jpg" 
                    alt="Foto romántica de la pareja" 
                    class="couple-photo">
        </div>

        <!-- Sección de ceremonia -->
        <div class="section">
            <div class="section-title">CEREMONIA RELIGIOSA</div>
            <div class="info-text">
                <strong>Parroquia Inmaculado Corazón de María</strong><br>
                C. Guillermo Prieto 561, Guadalajarita, 28030 Colima, Col.
            </div>
            <a href="https://maps.google.com/?q=Parroquia+Inmaculado+Corazón+de+María,+C.+Guillermo+Prieto+561,+Guadalajarita,+28030+Colima,+Col." target="_blank" class="location-button" style="display: inline-block; text-decoration: none;">Ver ubicación</a>
            
        </div>

        <div class="couple-photo-container">
            <img src="PARROQUIA.jpg" 
                    alt="Parroquia Inmaculado Corazón de María" 
                    class="couple-photo">
        </div>

        <!-- Sección de recepción -->
        <div class="section">
            <div class="section-title">SALÓN DE EVENTOS</div>
            <div class="info-text">
                <strong>Rojo y Miel</strong><br>
                Corregidora 183, San Juan, 28450 Comala, Col.
            </div>
            <a href="https://maps.google.com/?q=Rojo+y+Miel,+Corregidora+183,+San+Juan,+28450+Comala,+Col." target="_blank" class="location-button" style="display: inline-block; text-decoration: none;">Ver ubicación</a>
        </div>
        <div class="couple-photo-container">
            <img src="SALON.jpg" 
                    alt="Rojo y Miel Salón de Eventos" 
                    class="couple-photo">
        </div>

        <!-- Código de vestimenta -->
        <div class="section">
            <div class="section-title">CÓDIGO DE VESTIMENTA</div>
            <div class="dress-code">Formal</div>
            <div class="dress-code-icons">
                <div class="icon-placeholder"><img src="Traje.png" alt="Traje" style="width:50px; height: 50px; opacity: 0.7;"></div>
                <div class="icon-placeholder"><img src="Vestido.png" alt="Vestido" style="width:50px; height: 50px; opacity: 0.7;"></div>
            </div>
            
            <!-- Texto actualizado -->
            <div class="info-text">

                <strong>Tonalidad principal de la boda:</strong> <br> Verde Olivo
                <span style="display: inline-block; width: 20px; height: 20px; background-color: #708238; border-radius: 50%; margin-left: 8px; border: 2px solid white; vertical-align: middle;"></span>
                <br><br>

                Para mantener la armonía visual del evento:<br><br>

                <strong><span class="dress-code">Caballeros:</span> </strong><br>
                Les pedimos evitar accesorios (camisa, corbata o moño) en color verde olivo.<br><br>

                <strong><span class="dress-code">Damas:</span></strong><br>
                Agradeceremos evitar vestidos en color blanco, ivory, derivados y verde olivo.
            </div>
        </div>

        <div class="couple-photo-container">
            <img src="IMG5.jpg" 
                    alt="Foto romántica de la pareja" 
                    class="couple-photo"
                    style="object-position: center 30%;">
        </div>


        <!-- Cronograma -->
        <div class="section">
            <div class="section-title-schedule">TE COMPARTIMOS LOS DETALLES DE LA CELEBRACIÓN</div>
            <div class="timeline-container">
                <div class="timeline-item" data-index="0">
                    <div class="timeline-dot">
                        <span class="timeline-number">♡</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">06:00 PM</div>
                        <div class="timeline-event">Ceremonia Religiosa</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="1">
                    <div class="timeline-dot">
                        <span class="timeline-number">♡</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">7:30 PM</div>
                        <div class="timeline-event">Recepción en el salón de eventos</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="2">
                    <div class="timeline-dot">
                        <span class="timeline-number">♡</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">8:00 PM</div>
                        <div class="timeline-event">Entrada de novios</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="3">
                    <div class="timeline-dot">
                        <span class="timeline-number">♡</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">8:30 PM</div>
                        <div class="timeline-event">Brindis y vals</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="4">
                    <div class="timeline-dot">
                        <span class="timeline-number">♡</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">10:00 PM</div>
                        <div class="timeline-event">Cena</div>
                    </div>
                </div>
                <div class="timeline-item" data-index="5">
                    <div class="timeline-dot">
                        <span class="timeline-number">♡</span>
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-time">11:00 PM</div>
                        <div class="timeline-event">Baile</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Otra foto -->
        <div class="couple-photo-container">
            <img src="IMG6.jpg" 
                    alt="Foto romántica de la pareja" 
                    class="couple-photo"
                    style="object-position: center 30%;">
        </div>

        <!-- Información adicional -->
        <div class="section">
            <div class="section-title">SUGERENCIAS DE REGALOS</div>
            <div class="info-text">
                <span class="gifts-text">
                    Lo más importante para nosotros es compartir este día tan especial con ustedes.
                    Si desean obsequiarnos algo, pueden participar en nuestra <em>lluvia de sobres</em>
                </span>
                <br>
                <span>
                    <img src="Sobre.png" alt="sobre" style="width:55px; height: 55px; opacity: 0.7; margin-top: 10px; margin-bottom: 10px;">
                </span> 
                <br> 
                <span class="gifts-text">
                    O, si lo prefieren pueden visitar nuestra mesa de regalos en Amazon, donde seleccionamos algunos detalles que nos ayudarán a comenzar esta nueva etapa juntos.
                </span>
                <br> 
                <a href="https://www.amazon.com.mx/wedding/registry/3TH286IOUNYQ3" target="_blank" class="amazon-button" style="display: inline-block; text-decoration: none; background: rgba(255,255,255,0.1); padding: 15px 20px; border-radius: 10px; margin: 15px 0; transition: all 0.3s ease; border: 2px solid rgba(255,255,255,0.3);">
                    <img src="Amazon.png" alt="Mesa de regalos Amazon" style="height: 55px; opacity: 0.9;">
                </a>
                <br>
                <span class="gifts-text">
                    Además, tendremos una mesa de regalos en la fiesta para quienes deseen llevar algo físico ese día.
                </span>
                
            </div>
        </div>

        <!-- RSVP y mensaje final -->
        <div class="section rsvp-section">
            <div class="section-title">CONFIRMAR ASISTENCIA</div>
            <div class="info-text" style="margin-bottom: 20px;">
                Por favor confirma tu asistencia antes del 30 de diciembre
            </div>
            
            <!-- Formulario de confirmación -->
            <form id="rsvpForm" action="https://formspree.io/f/movkyprl" method="POST" style="text-align: left; max-width: 300px; margin: 0 auto;">
                <div style="margin-bottom: 15px;">
                    <label for="nombre" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">Nombre completo:</label>
                    <input type="text" id="nombre" name="nombre" required style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em;">
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="asistencia" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">¿Asistirás?</label>
                    <select id="asistencia" name="asistencia" required style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em;">
                        <option value="">Selecciona una opción</option>
                        <option value="si">Sí, asistiré</option>
                        <option value="no">No podré asistir</option>
                    </select>
                </div>
                
                <div id="cantidadPersonas" style="margin-bottom: 15px; display: none;">
                    <label for="personas" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">¿Cuántos acompañantes tendrás?</label>
                    <select id="personas" name="personas" style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em;">
                        <option value="1">1 persona</option>
                        <option value="2">2 personas</option>
                        <option value="3">3 personas</option>
                        <option value="4">4 personas</option>
                        <option value="5">5 personas</option>
                        <option value="6">6 personas</option>
                        <option value="7">7 personas</option>
                        <option value="8">8 personas</option>
                        <option value="9">9 personas</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="comentarios" style="display: block; color: white; margin-bottom: 5px; font-size: 0.9em;">Comentarios (opcional):</label>
                    <textarea id="comentarios" name="comentarios" rows="3" style="width: 100%; padding: 8px; border: none; border-radius: 5px; font-size: 0.9em; resize: vertical;" placeholder="Alergias alimentarias, necesidades especiales, etc."></textarea>
                </div>
                
                <button type="submit" style="width: 100%; background: white; color: #a8b8a0; padding: 12px; border: none; border-radius: 25px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    Confirmar Asistencia
                </button>
            </form>
            
            <!-- Mensaje de confirmación -->
            <div id="mensajeConfirmacion" style="display: none; background: rgba(255,255,255,0.9); color: #5a6b52; padding: 20px; border-radius: 10px; margin-top: 20px;">
                <strong>¡Gracias por confirmar!</strong><br>
                Hemos recibido tu respuesta. Te esperamos con mucho cariño.
            </div>
            
            <div class="section-title" style="margin-top: 30px;">ESPERAMOS CONTAR CON SU PRESENCIA</div>
            <div class="final-message">
                ¡Muchas Gracias!
            </div>
        </div>
        <div class="couple-photo-container">
            <img src="IMG2.jpg" 
                    alt="Parroquia Inmaculado Corazón de María" 
                    class="couple-photo">
        </div>
        <div class="couple-photo-container">
            <img src="IMG3.jpg" 
                    alt="Parroquia Inmaculado Corazón de María" 
                    class="couple-photo">
        </div>
        <div class="couple-photo-container">
            <img src="IMG7.jpg" 
                    alt="Parroquia Inmaculado Corazón de María" 
                    class="couple-photo">
        </div>
        <div class="couple-photo-container">
            <img src="IMG8.jpg" 
                    alt="Parroquia Inmaculado Corazón de María" 
                    class="couple-photo">
        </div>
        <!-- CREDITOS -->
        <div class="section rsvp-section" style="font-size: 0.6em; color: white; text-align: center;">
            Diseñado y desarrollado por: <br> Maximiliano Retana & Berenice Carmona
        </div>
    </div>

    <script>
        // Animación del sobre
        let envelopeOpened = false;
        let scrollTimeout;

        function initEnvelopeAnimation() {
            const envelopeContainer = document.getElementById('envelope-container');
            const envelopeWrapper = document.querySelector('.envelope-wrapper');
            const invitationContent = document.getElementById('invitation-content');

            // Función para abrir el sobre
            function openEnvelope() {
                if (envelopeOpened) return;
                
                envelopeOpened = true;
                envelopeWrapper.classList.add('opening');
                
                // Después de la animación de apertura, ocultar el sobre y mostrar la invitación
                setTimeout(() => {
                    envelopeContainer.classList.add('opened');
                    invitationContent.classList.add('visible');
                }, 600);
            }

            // Detectar scroll para abrir el sobre
            function handleScroll() {
                if (!envelopeOpened && window.scrollY > 50) {
                    openEnvelope();
                }
            }

            // Detectar scroll con debounce
            window.addEventListener('scroll', () => {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(handleScroll, 10);
            });

            // También permitir hacer clic para abrir
            envelopeContainer.addEventListener('click', openEnvelope);

            // Abrir automáticamente después de 3 segundos si no hay interacción
            setTimeout(() => {
                if (!envelopeOpened) {
                    openEnvelope();
                }
            }, 3000);
        }

        // Inicializar cuando se carga la página
        document.addEventListener('DOMContentLoaded', initEnvelopeAnimation);

        // Función para actualizar el contador
        function updateCountdown() {
            const weddingDate = new Date('2026-01-31T18:00:00');
            const now = new Date();
            const diff = weddingDate - now;
            
            // Si la fecha ya pasó, mostrar ceros
            if (diff <= 0) {
                document.querySelectorAll('.countdown-number')[0].textContent = '00';
                document.querySelectorAll('.countdown-number')[1].textContent = '00';
                document.querySelectorAll('.countdown-number')[2].textContent = '00';
                document.querySelectorAll('.countdown-number')[3].textContent = '00';
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            // Formatear con dos dígitos
            document.querySelectorAll('.countdown-number')[0].textContent = days.toString().padStart(2, '0');
            document.querySelectorAll('.countdown-number')[1].textContent = hours.toString().padStart(2, '0');
            document.querySelectorAll('.countdown-number')[2].textContent = minutes.toString().padStart(2, '0');
            document.querySelectorAll('.countdown-number')[3].textContent = seconds.toString().padStart(2, '0');
        }
        
        // Actualizar cada segundo
        setInterval(updateCountdown, 1000);
        updateCountdown();
        
        // Manejar el formulario RSVP
        document.addEventListener('DOMContentLoaded', function() {
            const asistenciaSelect = document.getElementById('asistencia');
            const cantidadPersonasDiv = document.getElementById('cantidadPersonas');
            const rsvpForm = document.getElementById('rsvpForm');
            const mensajeConfirmacion = document.getElementById('mensajeConfirmacion');
            
            // Mostrar/ocultar campo de cantidad de personas
            asistenciaSelect.addEventListener('change', function() {
                if (this.value === 'si') {
                    cantidadPersonasDiv.style.display = 'block';
                    document.getElementById('personas').required = true;
                } else {
                    cantidadPersonasDiv.style.display = 'none';
                    document.getElementById('personas').required = false;
                }
            });
            
            // Manejar envío del formulario
            rsvpForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(rsvpForm);
                
                // Enviar datos a Formspree
                fetch(rsvpForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        // Mostrar mensaje de confirmación
                        rsvpForm.style.display = 'none';
                        mensajeConfirmacion.style.display = 'block';
                    } else {
                        throw new Error('Error al enviar el formulario');
                    }
                })
                .catch(error => {
                    alert('Hubo un problema al enviar tu confirmación. Por favor intenta nuevamente o contacta directamente a los novios.');
                    console.error('Error:', error);
                });
            });
        });
        
        // Animación del timeline al hacer scroll - CORREGIDO para funcionar con el sobre
        function animateTimeline() {
            const timelineContainer = document.querySelector('.timeline-container');
            if (!timelineContainer) return;
            
            const timelineProgress = document.querySelector('.timeline-progress');
            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineDots = document.querySelectorAll('.timeline-dot');
            const invitationContainer = document.getElementById('invitation-content');
            
            // Si el sobre aún no se ha abierto, no animar el timeline
            if (!envelopeOpened || !invitationContainer.classList.contains('visible')) {
                return;
            }
            
            const containerRect = timelineContainer.getBoundingClientRect();
            const containerTop = containerRect.top;
            const containerHeight = containerRect.height;
            const windowHeight = window.innerHeight;
            
            // Mejorar el cálculo del progreso - ajustado para el nuevo layout
            let progress = 0;
            
            // Calcular el progreso basado en la posición del timeline dentro del contenedor de invitación
            if (containerTop <= windowHeight * 0.7) {
                const scrollProgress = Math.max(0, (windowHeight * 0.7 - containerTop) / (containerHeight + windowHeight * 0.3));
                progress = Math.min(1, scrollProgress);
            }
            
            // Animar la línea de progreso de manera más suave
            if (timelineProgress) {
                timelineProgress.style.height = (progress * 100) + '%';
                timelineProgress.style.transition = 'height 0.3s ease-out';
            }
            
            // Animar los elementos del timeline con bidireccionalidad
            timelineItems.forEach((item, index) => {
                // Calcular el punto de activación para cada elemento de forma más distribuida
                const itemActivationPoint = (index / (timelineItems.length - 1)) * 0.8;
                const shouldAnimate = progress >= itemActivationPoint;
                
                // Control bidireccional: aparece cuando debe aparecer, desaparece cuando no
                if (shouldAnimate) {
                    // Aparecer con delay escalonado solo si no está ya animado
                    if (!item.classList.contains('animate')) {
                        setTimeout(() => {
                            item.classList.add('animate');
                            if (timelineDots[index]) {
                                timelineDots[index].classList.add('animate');
                            }
                        }, index * 100);
                    }
                }
            });
        }
        
        // Optimizar los event listeners con throttle para mejor rendimiento
        let isScrolling = false;
        function throttledAnimateTimeline() {
            if (!isScrolling) {
                requestAnimationFrame(() => {
                    animateTimeline();
                    isScrolling = false;
                });
                isScrolling = true;
            }
        }
        
        // Función para configurar los event listeners del timeline
        function setupTimelineListeners() {
            const invitationContainer = document.getElementById('invitation-content');
            
            // Escuchar el scroll del contenedor de invitación
            if (invitationContainer) {
                invitationContainer.addEventListener('scroll', throttledAnimateTimeline);
            }
            
            // También mantener el listener global por si acaso
            window.addEventListener('scroll', throttledAnimateTimeline);
            window.addEventListener('resize', animateTimeline);
        }
        
        // Configurar listeners y ejecutar animaciones al cargar
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar los event listeners del timeline
            setupTimelineListeners();
            
            // Función para inicializar el timeline después de que el sobre se abra
            function initTimelineAfterEnvelope() {
                if (envelopeOpened) {
                    setTimeout(animateTimeline, 100);
                    setTimeout(animateTimeline, 300);
                    setTimeout(animateTimeline, 500);
                } else {
                    // Reintentar cada 100ms hasta que el sobre se abra
                    setTimeout(initTimelineAfterEnvelope, 100);
                }
            }
            
            // Iniciar la verificación
            initTimelineAfterEnvelope();
            
            // También ejecutar después de que las imágenes se carguen
            window.addEventListener('load', () => {
                setTimeout(() => {
                    if (envelopeOpened) {
                        animateTimeline();
                    }
                }, 100);
            });
        });
    </script>
</body>
</html>